<% if constraints? %>
  <div class="constraints well search_history">
    <h4><%= t 'blacklight.advanced_search.form.search_context' %></h4>
    <% constraints.each do |constraint| %>
      <%= constraint %>
    <% end %>
  </div>
<% end %>

<%= form_tag @url, method: @method, class: @classes.join(' '), role: 'search', 'aria-label' => t('blacklight.search.form.submit') do %>
  <%= render Blacklight::HiddenSearchStateComponent.new(params: hidden_search_state_params) %>

  <div class="input-criteria">
    <div id="advanced_search" class="query-criteria mb-4 panel panel-default">
        <div class="panel-heading">
          <h2 class="panel-title"><%= t('blacklight.advanced_search.form.query_criteria_heading') %></h2>
        </div>
        <div class="panel-body">
          <% search_field_controls.each do |control| %>
            <%= control %>
          <% end %>

          <div class="advanced_search_field">
            <div id="advanced_operators" class="offset-sm-3 offset-md-3 offset-lg-2 col-sm-8 col-md-10 col-lg-6">
              <div class="form-check form-check-inline">
                <%= radio_button_tag(:op, 'must', true, class: 'form-check-input') %>
                <label class="form-check-label" for="op_must">find all terms</label>
              </div>
              <div class="form-check form-check-inline">
                <%= radio_button_tag(:op, 'should', false, class: 'form-check-input') %>
                <label class="form-check-label" for="op_should">find any terms</label>
              </div>
            </div>
          </div>
        </div>

      <div class="panel-footer">
        <%= submit_tag t('blacklight.advanced_search.form.search_btn_html'), class: 'btn btn-primary advanced-search-submit' %>
        <%= link_to t('blacklight.advanced_search.form.start_over_html'), request.path, :class =>"btn btn-link advanced-search-start-over" %>
      </div>
    </div>

    <% if search_filter_controls? %>
      <div class="limit-criteria mb-4 panel panel-default">
        <div class="panel-heading">
          <h2 class="panel-title"><%= t('blacklight.advanced_search.limit')%></h2>
        </div>

        <div class="panel-body">
          <div id="date_range_limit" class="advanced_search_field">
            <div class="form-group">
              <label class="col-form-label col-md-3 col-lg-2">Year</label>
              <div class="col-sm-8">
                <div class="row">
                  <% %w(start end).each do |v| %>
                    <div class="form-group col-sm-6">
                      <div class="input-group">
                          <label id="<%= "date_range_#{v}_label" %>" class="input-group-addon" for="<%= "range_date_facet_yearly_itim_#{v}" %>">
                            <%= v.capitalize %>
                          </label>
                        <%= text_field_tag("range[date_facet_yearly_itim][#{v}]", nil,
                                          id: "range_date_facet_yearly_itim_#{v}", class: 'form-control', maxlength: 4) %>
                      </div>
                    </div>
                  <% end %>
                </div>
              </div>
            </div>
          </div>

          <div id="advanced_search_facets" class="limit_input">
            <div class="facets-collapse col-md-9 offset-md-3">
              <% search_filter_controls.each do |control| %>
                <%= control %>
              <% end %>
            </div>
          </div>
        </div>
        <div class="panel-footer">
          <%= submit_tag t('blacklight.advanced_search.form.search_btn_html'), class: 'btn btn-primary advanced-search-submit', id: "advanced-search-submit" %>
          <%= link_to t('blacklight.advanced_search.form.start_over_html'), request.path, :class =>"btn btn-link advanced-search-start-over" %>
        </div>
      </div>
    <% end %>
  </div>
<% end %>