<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
            rel="shortcut icon"
            type="image/png"
            href="https://s3.us-east-2.wasabisys.com/lmec-public-files/images/LMEC_compass_transparent.png"
    />

    <title>Allmaps WarpedMapLayer test</title>

    <!-- External JS goes here -->
    <!--    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>-->
    <!--    <script-->
    <!--      type="module"-->
    <!--      src="https://cdn.jsdelivr.net/npm/@allmaps/leaflet/dist/bundled/allmaps-leaflet-1.9.umd.js"-->
    <!--    ></script>-->

    <link
            rel="stylesheet"
            href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    />

</head>
<body>
<div id="wrapper">
    <div id="map" style="width: 700px; height: 500px;"></div>
</div>

<script type="module">
    import L from 'https://esm.run/leaflet';
    import { WarpedMapLayer } from 'https://esm.run/@allmaps/leaflet';

    const map = L.map("map", {
        center: [51.05, 3.7304],
        zoom: 12,
        zoomAnimationThreshold: 1
    });

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",
        maxZoom: 18
    }).addTo(map);

    const annotationUrl = `https://annotations.allmaps.org/manifests/8f9faeba73d67031`;
    let wml = new WarpedMapLayer(annotationUrl).addTo(map);

    map.on("warpedmapadded", () => {
        map.fitBounds(wml.getBounds());
    });

</script>

</body>
</html>
